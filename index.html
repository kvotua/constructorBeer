<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pumpkin Ale</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/CustomEase.min.js"></script>
    <script src="https://unpkg.com/lenis@1.0.45/dist/lenis.min.js"></script>
    <link
      href="https://fonts.cdnfonts.com/css/copperplate-cyrillic"
      rel="stylesheet"
    />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap');
      @import url('https://fonts.cdnfonts.com/css/thegoodmonolith');

      :root {
        /* Colors */
        --color-offwhite: #f8f6f2;
        --color-offblack: #302b27;
        --color-offblack-transparent: rgba(48, 43, 39, 0.2);
        --color-overlay-dark: rgba(0, 0, 0, 0.4);
        --color-pumpkin: #f06a12;

        /* Fonts */
        --font-main: 'Inter', sans-serif;
        --font-mono: 'TheGoodMonolith', sans-serif;
        --font-waldorf: 'Times New Roman', serif;
        --font-copperplate: 'Copperplate Cyrillic', serif;

        /* Transitions */
        --transition-smooth: cubic-bezier(0.16, 1, 0.3, 1);
        --transition-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-main);
        background-color: var(--color-offwhite);
        color: var(--color-offblack);
        overflow-x: hidden;
        letter-spacing: -0.02em;
        font-weight: 700;
      }

      /* Dust/Scratches background effect for the entire site */
      body::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://img.freepik.com/premium-photo/white-dust-scratches-black-background_279525-2.jpg?w=640');
        background-repeat: repeat;
        opacity: 0.5;
        mix-blend-mode: overlay;
        pointer-events: none;
        z-index: 999;
      }

      /* 12-column grid system */
      .grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 1rem;
        padding: 0 2rem;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      .logo {
        position: absolute;
        top: 2rem;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        margin-top: 30px; /* т.к без фикс.ширины верх.отступ пропадает*/
        /* width: 120px; */
        max-height: 120px;
        height: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        background: none;
      }

      .logo img {
        width: 100%;
        height: auto;
        object-fit: contain;
      }

      .container {
        height: 100vh;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 1rem;
        padding: 2rem;
        align-items: center;
        justify-items: center;
        perspective: 800px;
      }

      .header-content {
        grid-column: 4 / span 6;
        text-align: center;
        transform-style: preserve-3d;
        margin-top: 60px; /* Уменьшен отступ для логотипа */
      }

      .header-content > * {
        transform-style: preserve-3d;
        backface-visibility: hidden;
        transform-origin: center top;
      }

      .pumpkin-illustration {
        /* width: 100px; Уменьшен размер иллюстрации */
        height: 100px;
        margin: 30px auto 1.5rem; /* Уменьшен отступ сверху */
        position: relative;
      }

      .pumpkin-illustration > img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .title {
        margin-bottom: 0.5rem;
        font-size: 2.9rem; /* Уменьшено с 3.5rem до 2.9rem (в 1.2 раза) */
        text-transform: none; /* Убрано uppercase */
        font-family: var(--font-waldorf);
        color: var(--color-pumpkin);
        /* line-height: 0.8; */
        line-height: 0.9;
        letter-spacing: -0.02em;
      }

      .title::first-letter {
        text-transform: uppercase; /* Только первая буква заглавная */
      }

      .subtitle {
        margin-bottom: 2rem;
        font-size: 3.9rem; /* Уменьшено с 4.7rem до 3.9rem (в 1.2 раза) */
        text-transform: none; /* Убрано uppercase */
        font-family: var(--font-waldorf);
        color: var(--color-pumpkin);
        line-height: 0.8;
        letter-spacing: -0.02em;
      }

      .subtitle::first-letter {
        text-transform: uppercase; /* Только первая буква заглавная */
      }

      .credits {
        margin-top: 2rem;
        text-transform: uppercase;
        font-size: 0.8rem;
        font-family: var(--font-mono);
        grid-column: 4 / span 6;
      }

      .brauerei {
        font-family: 'Inter', sans-serif;
        font-weight: 300;
        font-size: 1.1rem;
        color: var(--color-pumpkin);
        margin-bottom: 0.5rem;
        text-transform: none;
      }

      .brauerei::first-letter {
        text-transform: uppercase;
      }

      .kaliningrad {
        font-family: var(--font-copperplate);
        font-size: 1rem;
        color: var(--color-pumpkin);
        text-transform: none;
      }

      .kaliningrad::first-letter {
        text-transform: uppercase;
      }

      .scroll-container {
        position: relative;
        height: 300vh;
      }

      .video-wrapper {
        position: sticky;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1;
      }

      #video-container {
        width: 300px;
        height: 300px;
        overflow: hidden;
        background-color: var(--color-offblack);
        position: relative;
        transition: border-radius 0.3s ease;
        filter: blur(0px);
        clip-path: inset(0 0 0 0);
      }

      #video-container::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0);
        transition: background-color 0.3s ease;
        pointer-events: none;
      }

      video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        position: relative;
        z-index: 0;
      }

      .video-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--color-offblack-transparent);
        color: var(--color-offwhite);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 2rem;
        clip-path: inset(100% 0 0 0);
        backdrop-filter: blur(8px);
        z-index: 2;
      }

      .video-overlay .caption {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        margin-bottom: 1.5rem;
        transform: translateY(30px);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        /* position: absolute; */
        top: 2rem;
        left: 0;
        width: 100%;

        text-align: center;
      }

      .video-overlay .content {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
        filter: blur(10px);
        transform: scale(1.1);
        opacity: 1;
      }

      .video-overlay h2 {
        font-size: 2.4rem;
        margin-bottom: 0.5rem;
        transform: translateY(30px);
        text-transform: uppercase;
      }

      .video-overlay p {
        font-size: 1.2rem;
        line-height: 1.8;
        max-width: 32ch;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 1rem;
        transform: translateY(30px);
      }

      .spacer {
        height: 10vh;
      }

      .footer-content {
        padding: 10rem 0;
        text-align: center;
        margin: 0 auto;
      }

      .quote {
        margin-bottom: 3rem;
        line-height: 1.8;
        grid-column: 4 / span 6;
      }

      .quote p {
        margin-bottom: 1.5rem;
        max-width: 32ch;
        margin-left: auto;
        margin-right: auto;
      }

      .divider {
        width: 1px;
        height: 80px;
        background-color: var(--color-offblack);
        margin: 4rem auto;
        grid-column: 6 / span 2;
      }

      .mountain-footer {
        height: 50vh;
        position: relative;
        clip-path: inset(100% 0 0 0);
        overflow: hidden;
      }

      .mountain-footer video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .contact-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 10;
        color: var(--color-offwhite);
        cursor: pointer;
        transition: all 0.3s ease;
        opacity: 0;
        pointer-events: auto;
      }

      .contact-btn .label {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        text-transform: uppercase;
        margin-bottom: 0.75rem;
        letter-spacing: 0.05em;
      }

      .contact-btn .email-container {
        position: relative;
        display: inline-block;
      }

      .contact-btn .email {
        font-size: 0.9rem;
        padding: 0 0.6em;
        position: relative;
        display: inline-block;
      }

      .contact-btn .left-bracket,
      .contact-btn .right-bracket {
        transition:
          opacity 0.3s var(--transition-elastic),
          transform 0.3s var(--transition-elastic);
      }

      .contact-btn .left-bracket {
        margin-right: 3px;
      }

      .contact-btn .right-bracket {
        margin-left: 3px;
        transition-delay: 0.15s;
      }
    </style>
  </head>
  <body>
    <div class="logo">
      <img
        src="https://i.ibb.co/DDxZ2Xq2/photo-2024-11-23-20-27-20.jpg"
        alt="Pumpkin Ale Logo"
      />
      <button id="editLogo" class="edit-btn">
        <img src="./assets/edit.svg" alt="" class="img-edit-btn" />
      </button>
    </div>

    <div class="container">
      <div class="header-content">
        <div class="pumpkin-illustration">
          <img
            src="https://i.ibb.co/MkxRwWdC/photo-2024-11-23-20-27-20.jpg"
            alt="Pumpkin Illustration"
          />
          <button id="editPic" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </div>
        <!-- <h1 class="title">
          Pumpkin<button id="editTitle" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </h1>

        <h2 class="subtitle">
          Ale
          <button id="editSubtitle" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </h2> -->

        <h1 class="title">
          Pumpkin <br />
          Ale<button id="editTitle" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </h1>
        <div class="credits">
          <p class="brauerei">
            Brauerei Ponarth
            <button id="editPlace" class="edit-btn">
              <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
            </button>
          </p>
          <p class="kaliningrad">
            Калининград
            <button id="editCity" class="edit-btn">
              <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
            </button>
          </p>
        </div>
      </div>
    </div>

    <div class="scroll-container">
      <div class="video-wrapper">
        <div id="video-container">
          <video id="video" autoplay loop muted playsinline>
            <source
              src="https://cdn.cosmos.so/74eaa492-31ae-4550-b5a1-40917d873af5.mp4"
              type="video/mp4"
            />
          </video>
          <button id="editVideo" class="edit-btn">
            <img
              src="./assets/edit.svg"
              alt=""
              class="edit-btn-img edit-btn-img-light"
            />
          </button>
          <div class="video-overlay">
            <div class="caption">THOUGHT VESSEL 01</div>
            <button id="editCaption" class="edit-btn">
              <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
            </button>
            <div class="content">
              <h2 class="title-content">
                Clarity in Silence
                <button id="editTitleContent" class="edit-btn">
                  <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
                </button>
              </h2>
              <p class="p-content">
                Design emerges from emptiness. Mental clarity precedes visual
                harmony.
                <button id="editPContent" class="edit-btn">
                  <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
                </button>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="spacer"></div>

    <div class="footer-content grid">
      <!-- <div class="quote">
        <p class="quote-part-a">
          Trapped in the wisdom of certainty. Shuttered vision through the lens
          of anxiety. Judgment of the incomplete. Shadows of expectation. Urge
          of control even when creativity should be freed.
          <button id="editQuoteA" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </p>
        <p class="quote-part-b">
          Quiet the mind, and you will hear creativity speak. Feel the
          inspiration flowing through moments of stillness. Nourish your
          authentic expression by first emptying your cup.
          <button id="editQuoteB" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </p>
      </div> -->
      <div class="quote">
        <p>
          Trapped in the wisdom of certainty. Shuttered vision through the lens
          of anxiety. Judgment of the incomplete. Shadows of expectation. Urge
          of control even when creativity should be freed.
          <br /><br />
          Quiet the mind, and you will hear creativity speak. Feel the
          inspiration flowing through moments of stillness. Nourish your
          authentic expression by first emptying your cup.
          <button id="editQuote" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </p>
      </div>
      <div class="divider"></div>
      <div class="credits">
        <p class="credit">
          A Way of Being
          <br />
          Through Mindful Creation
          <button id="editCredits" class="edit-btn">
            <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
          </button>
        </p>
      </div>
    </div>

    <div class="mountain-footer">
      <video id="footerVideo" loop muted playsinline autoplay>
        <source
          src="https://cdn.cosmos.so/7f099da0-9ab2-49fd-879d-0bdfef258209.mp4"
          type="video/mp4"
        />
      </video>
      <button id="editFooterBg" class="edit-btn edit-btn-img-light">
        <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
      </button>
      <div class="contact-btn">
        <div class="label">
          +Get In Touch
          <button id="editFooterLabel" class="edit-btn">
            <img
              src="./assets/edit.svg"
              alt=""
              class="edit-btn-img edit-btn-img-light"
            />
          </button>
        </div>
        <div class="email-container">
          <span class="left-bracket">[</span>
          <span class="email" id="email-copy"
            >hi@filip.fyi
            <button id="editFooterEmail" class="edit-btn edit-btn-img-light">
              <img
                src="./assets/edit.svg"
                alt=""
                class="edit-btn-img"
              /></button
          ></span>
          <span class="right-bracket">]</span>
        </div>
      </div>
    </div>
    <button id="editBackground" class="edit-btn edit-btn-bg">
      <img src="./assets/edit.svg" alt="" class="edit-btn-img" />
    </button>
    <div id="colorPanel" class="color-panel">
      <div class="panel-header">
        <span>Выбрать цвет фона</span>
        <button class="color-panel-close panel-close">&times;</button>
      </div>

      <div class="panel-choose panel-choose-color">
        <div class="color-panel-bg">
          <input
            type="color"
            id="panelColorInput"
            class="panel-input panel-color-input"
          />
          <button id="resetColorBg">Сбросить</button>
        </div>
        <span>Выбрать цвет элементов</span>
        <div class="color-panel-elements">
          <input
            type="color"
            id="panelColorElementsInput"
            class="panel-input panel-color-input"
          />

          <button id="resetColorElements">Сбросить</button>
        </div>
      </div>
    </div>
    <!-- <div id="mediaPanel" class="media-panel">
      <div class="panel-header">
        <span>Вставьте ссылку на медиа</span>
        <button class="panel-close">&times;</button>
      </div>
      <input
        type="url"
        id="panelUrlInput"
        placeholder="https://..."
        class="panel-input"
      />
      <div class="panel-actions">
        <button id="panelConfirm" class="panel-btn confirm">Применить</button>
      </div>
    </div> -->
    <div id="mediaPanel" class="media-panel">
      <div class="panel-header">
        <span>Выбрать медиа</span>
        <button class="media-panel-close panel-close">&times;</button>
      </div>
      <div class="panel-choose panel-choose-url">
        <label for="panelUrlInput">Вставьте ссылку</label>
        <input
          type="url"
          id="panelUrlInput"
          placeholder="https://..."
          class="panel-input"
        />
      </div>
      <div class="panel-choose panel-choose-file">
        <label for="panelUrlInput">Или прикрепите медиа</label>
        <input
          type="file"
          id="panelFileInput"
          class="panel-file-input"
          accept="image/*, video/*"
        />
      </div>
      <div class="panel-actions">
        <button id="panelConfirm" class="panel-btn confirm">Применить</button>
      </div>
    </div>

    <style>
      .panel-header {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .panel-close {
        width: 25px;
        height: 25px;
      }
      .media-panel {
        position: fixed;
        top: 50%;
        left: 23%;
        right: 23%;
        width: 64%;
        max-width: 350px;
        margin: 0 auto;
        padding: 10px;
        display: flex;
        flex-direction: column;

        gap: 10px;
        border: 1px solid black;
        background-color: rgba(185, 185, 185, 0.5);

        visibility: hidden;
        z-index: 100;
      }
      .color-panel {
        position: fixed;
        top: 8%;
        right: 3%;

        width: 80%;
        max-width: 210px;
        padding: 10px;
        display: flex;
        flex-direction: column;

        gap: 10px;
        border: 1px solid black;
        background-color: rgba(185, 185, 185, 0.5);

        visibility: hidden;
        z-index: 100;
      }
      .panel-color-input {
        width: 150px;
      }
      .color-panel-elements,
      .color-panel-bg {
        display: flex;
      }
      .panel-choose {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      .edit-btn-img {
        object-fit: cover;
        width: 100%;
      }
      .edit-btn {
        border-radius: 50%;
        width: 35px;
        height: 35px;
        z-index: 30;
        background: transparent;
        border: none;
        cursor: pointer;
        position: absolute;
        bottom: 0;
        display: none;
        right: -30px;
        bottom: -10px;
      }
      .edit-btn-bg {
        display: inline;
        position: fixed;
        top: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
      }
      #editCredits {
        top: 0;
        right: 1rem;
      }
      #editVideo {
        right: 20px;
        top: 20px;
      }

      .edit-btn-img-light {
        filter: brightness(0) invert(1);
      }
      #editCaption {
        top: 3%;
        right: 33%;
      }
      #editFooterLabel {
        top: -25%;
        right: -15%;
      }
      #editFooterBg {
        top: 0;
        right: 0;
      }
    </style>

    <script>
      const buttonEditBg = document.getElementById(`editBackground`);
      const panelColor = document.getElementById(`colorPanel`);
      const closeBtnColor = document.querySelector(`.color-panel-close`);
      const bgColor = document.getElementById(`panelColorInput`);
      const elementColor = document.getElementById(`panelColorElementsInput`);

      const titleElement = document.querySelector('.title');
      const brauereiElement = document.querySelector('.brauerei');
      const kaliningradElement = document.querySelector('.kaliningrad'); // const kaliningradElement = document.querySelector('.kaliningrad');
      const resetColorElements = document.getElementById(`resetColorElements`);
      const resetColorBg = document.getElementById(`resetColorBg`);

      resetColorBg.addEventListener(`click`, () => {
        document.body.style.backgroundColor = `#f8f6f2`;
      });
      resetColorElements.addEventListener(`click`, () => {
        titleElement.style.color = `#f06a12`;
        brauereiElement.style.color = `#f06a12`;
        kaliningradElement.style.color = `#f06a12`;
      });

      buttonEditBg.addEventListener(`click`, () => {
        if (panelColor.style.visibility === 'hidden') {
          panelColor.style.visibility = 'visible';
        } else {
          panelColor.style.visibility = 'hidden';
        }
      });
      elementColor.addEventListener(`change`, () => {
        let selectedColor = elementColor.value;
        titleElement.style.color = selectedColor;
        brauereiElement.style.color = selectedColor;
        kaliningradElement.style.color = selectedColor;
      });
      closeBtnColor.addEventListener(`click`, () => {
        panelColor.style.visibility = 'hidden';
      });
      bgColor.addEventListener(`change`, () => {
        let selectedColor = bgColor.value;
        document.body.style.backgroundColor = selectedColor;
      });

      function makeEditable(buttonSelector, elementSelector) {
        const button = document.querySelector(buttonSelector);
        const element = document.querySelector(elementSelector);
        element.addEventListener(`mouseenter`, function makeVisibleEdit() {
          button.style.display = `inline`;
        });
        element.addEventListener(`mouseleave`, function makeInvisibleEdit() {
          button.style.display = `none`;
        });
        button.addEventListener(`click`, function Edit() {
          button.style.display = 'none';
          element.contentEditable = true;
          element.focus();
        });

        element.addEventListener(`blur`, function saveChange() {
          element.contentEditable = false;
        });
      }

      let currentMediaElement = null;
      const panelMedia = document.getElementById('mediaPanel');
      const input = document.getElementById('panelUrlInput');
      const confirmBtn = document.getElementById('panelConfirm');
      const closeBtn = document.querySelector('.media-panel-close');

      function showMediaPanel(mediaElement) {
        currentMediaElement = mediaElement;
        input.value = mediaElement.src || '';
        panelMedia.style.visibility = 'visible';
        panelMedia.style.opacity = '1';
        input.focus();
      }

      function hideMediaPanel() {
        panelMedia.style.opacity = '0';
        panelMedia.style.visibility = 'hidden';
        currentMediaElement = null;
      }

      function updateMedia() {
        const url = input.value.trim();
        const fileInput = document.getElementById('panelFileInput');

        if (fileInput.files.length > 0) {
          const file = fileInput.files[0];
          const fileURL = URL.createObjectURL(file);

          if (currentMediaElement.tagName === 'VIDEO') {
            currentMediaElement.innerHTML = `<source src="${fileURL}" type="${file.type}">`;
            currentMediaElement.load();
          } else {
            currentMediaElement.src = fileURL;
          }
        } else if (url && currentMediaElement) {
          if (currentMediaElement.tagName === 'VIDEO') {
            currentMediaElement.innerHTML = `<source src="${url}" type="video/mp4">`;
            currentMediaElement.load();
          } else {
            currentMediaElement.src = url;
          }
        }

        hideMediaPanel();
      }
      function makeMediaEditable(buttonSelector, mediaElementSelector) {
        const button = document.querySelector(buttonSelector);
        const mediaElement = document.querySelector(mediaElementSelector);

        mediaElement.parentElement.addEventListener('mouseenter', () => {
          button.style.display = 'inline';
        });

        mediaElement.parentElement.addEventListener('mouseleave', () => {
          button.style.display = 'none';
        });

        button.addEventListener('click', () => {
          button.style.display = 'none';
          showMediaPanel(mediaElement);
        });
      }

      document.addEventListener('DOMContentLoaded', function () {
        makeEditable('#editTitle', '.title');
        makeEditable('#editPlace', '.brauerei');
        makeEditable('#editCity', '.kaliningrad');
        makeEditable(`#editTitleContent`, `.title-content`);

        makeEditable(`#editPContent`, `.p-content`);
        makeEditable(`#editCaption`, `.caption`);
        makeEditable(`#editQuote`, `.quote p`);

        makeEditable(`#editCredits`, `.credit`);

        makeEditable(`#editFooterLabel`, `.label`);
        makeEditable(`#editFooterEmail`, `.email`);
        makeMediaEditable('#editLogo', '.logo img');
        makeMediaEditable('#editPic', '.pumpkin-illustration img');
        makeMediaEditable('#editVideo', '#video');
        makeMediaEditable(`#editFooterBg`, `#footerVideo`);

        panelConfirm.addEventListener('click', () => {
          updateMedia();
        });

        closeBtn.addEventListener('click', () => {
          hideMediaPanel();
        });
      });
    </script>

    <script>
      // Initialize Lenis for smooth scrolling
      const lenis = new Lenis({
        duration: 0.8,
        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        orientation: 'vertical',
        gestureOrientation: 'vertical',
        smoothWheel: true,
      });

      // Register ScrollTrigger plugin
      gsap.registerPlugin(ScrollTrigger, CustomEase);

      // Sync Lenis with ScrollTrigger
      lenis.on('scroll', ScrollTrigger.update);

      gsap.ticker.add(time => {
        lenis.raf(time * 1000);
      });

      gsap.ticker.lagSmoothing(0);

      // Custom eases
      CustomEase.create('softReveal', '0.5, 0, 0, 1');
      CustomEase.create('smoothBlur', '0.25, 0.1, 0.25, 1');

      // Video animation
      const videoContainer = document.getElementById('video-container');
      const video = document.getElementById('video');
      const videoOverlay = document.querySelector('.video-overlay');
      const overlayCaption = document.querySelector('.video-overlay .caption');
      const overlayContent = document.querySelector('.video-overlay .content');
      const overlayTitle = document.querySelector('.video-overlay h2');
      const overlayTexts = document.querySelectorAll('.video-overlay p');
      const mountainFooter = document.querySelector('.mountain-footer');
      const footerVideo = document.querySelector('.mountain-footer video');

      // Email copy functionality
      const emailBtn = document.querySelector('.contact-btn');
      const emailElement = document.getElementById('email-copy');
      const originalText = emailElement.textContent;
      let copyTimeout = null;

      // Listen for clicks on the contact button
      emailBtn.addEventListener('click', function () {
        // Copy the email to clipboard
        navigator.clipboard
          .writeText(originalText)
          .then(function () {
            // Show success message
            emailElement.textContent = 'email copied to clipboard';

            // Clear any existing timeout
            if (copyTimeout) {
              clearTimeout(copyTimeout);
            }

            // Reset text after 2 seconds
            copyTimeout = setTimeout(function () {
              emailElement.textContent = originalText;
            }, 2000);
          })
          .catch(function (err) {
            console.error('Could not copy text: ', err);
          });
      });

      // Ensure video plays
      video.play().catch(error => {
        console.log('Video play failed: ', error);
      });

      // Create timeline for video animation
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: '.scroll-container',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1.2,
          markers: false,
          onEnter: () => video.play(),
        },
      });

      // Create timeline for hero section animation with film roll effect
      const heroTl = gsap.timeline({
        scrollTrigger: {
          trigger: '.container',
          start: 'top top',
          end: 'top+=400 top',
          scrub: 1.2,
          markers: false,
        },
      });

      // Animate each element in the header content with a film roll effect
      gsap.utils.toArray('.header-content > *').forEach((element, index) => {
        heroTl.to(
          element,
          {
            rotationX: 90,
            y: -30,
            scale: 0.7,
            opacity: 0,
            filter: 'blur(4px)',
            ease: 'power3.inOut',
            transformOrigin: 'center top',
          },
          index * 0.08
        );
      });

      // Create a background overlay for darkening effect
      const overlay = document.createElement('div');
      overlay.style.position = 'absolute';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.backgroundColor = 'rgba(0,0,0,0)';
      overlay.style.pointerEvents = 'none';
      overlay.style.zIndex = '1';
      videoContainer.appendChild(overlay);

      // Animate video container with darkening overlay
      tl.to(
        videoContainer,
        {
          width: '90vw',
          height: '90vh',
          borderRadius: '0',
          ease: 'expo.out',
          duration: 0.5,
        },
        0
      )
        .to(
          video,
          {
            scale: 1.1,
            ease: 'expo.out',
            duration: 0.5,
          },
          0
        )
        .to(
          overlay,
          {
            backgroundColor: 'rgba(0,0,0,0.4)',
            ease: 'power3.inOut',
            duration: 0.5,
          },
          0
        )
        .to(
          videoOverlay,
          {
            clipPath: 'inset(0% 0 0 0)',
            backdropFilter: 'blur(8px)',
            ease: 'expo.out',
            duration: 0.3,
          },
          0.4
        )
        .to(
          overlayCaption,
          {
            transform: 'translateY(0)',
            ease: 'expo.out',
            duration: 0.3,
          },
          0.45
        )
        .to(
          overlayContent,
          {
            filter: 'blur(0px)',
            transform: 'scale(1)',
            ease: 'expo.out',
            duration: 0.4,
          },
          0.45
        );

      // Footer animation
      gsap.to(mountainFooter, {
        scrollTrigger: {
          trigger: '.footer-content',
          start: 'top 80%',
          end: 'top 40%',
          scrub: 1.2,
          onEnter: () => footerVideo.play(),
          markers: false,
        },
        clipPath: 'inset(0% 0 0 0)',
        ease: 'expo.out',
        duration: 1,
      });

      // Contact button animation in footer
      gsap.to('.mountain-footer .contact-btn', {
        scrollTrigger: {
          trigger: '.mountain-footer',
          start: 'top 60%',
          end: 'top 40%',
          scrub: 0.8,
          markers: false,
        },
        opacity: 1,
        ease: 'expo.out',
        duration: 0.5,
      });

      // Text reveal animations
      gsap.utils.toArray('.footer-content p').forEach(text => {
        gsap.from(text, {
          scrollTrigger: {
            trigger: text,
            start: 'top 85%',
            end: 'top 70%',
            scrub: 1.2,
          },
          y: 15,
          filter: 'blur(5px)',
          ease: 'expo.out',
        });
      });
    </script>
  </body>
</html>
